# Override til udvikling: volumen-mounts + Docker Watch (auto-genstart ved filændring)
# Brug: docker compose -f docker-compose.yml -f docker-compose.dev.yml watch
#
# Watch kører på host og genstarter backend ved ændringer i backend/ eller frontend/,
# så I behøver ikke nodemon (som ofte ikke får file-events fra Windows → Linux volume).

services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile.dev
    volumes:
      - ./backend:/app
      - backend_node_modules:/app/node_modules
      - ./frontend:/app/public
    command: node server.js
    environment:
      NODE_ENV: development
    develop:
      watch:
        - path: ./backend
          action: restart
          ignore:
            - node_modules/
        - path: ./frontend
          action: restart

volumes:
  backend_node_modules:
